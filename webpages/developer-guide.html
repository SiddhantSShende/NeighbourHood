<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="NeighbourHood Developer Guide â€” learn how to integrate, authenticate, and build with the NeighbourHood API and SDK.">
    <meta name="theme-color" content="#7C3AED">
    <title>Developer Guide | NeighbourHood</title>
    <link rel="icon" type="image/svg+xml" href="./static/favicon.svg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="./static/landing.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        .guide-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 3rem 2rem;
        }
        .guide-section {
            background: var(--bg-primary);
            border: 1px solid var(--border-light);
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 2rem;
        }
        .guide-section h2 {
            color: var(--purple-700);
            margin-bottom: 1rem;
            font-size: 1.75rem;
        }
        .guide-section h3 {
            color: var(--text-primary);
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
            font-size: 1.25rem;
        }
        .guide-section pre {
            background: var(--bg-secondary);
            border: 1px solid var(--border-light);
            border-radius: 0.5rem;
            padding: 1rem;
            overflow-x: auto;
            margin: 1rem 0;
        }
        .guide-section code {
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            color: var(--purple-700);
        }
        .guide-section ul {
            margin-left: 2rem;
            line-height: 1.8;
        }
        .guide-section li {
            margin-bottom: 0.5rem;
        }
        .breadcrumb {
            margin-bottom: 2rem;
            color: var(--text-secondary);
        }
        .breadcrumb a {
            color: var(--purple-700);
            text-decoration: none;
        }
        .breadcrumb a:hover {
            text-decoration: underline;
        }
        .api-endpoint {
            background: linear-gradient(135deg, var(--purple-50), var(--purple-100));
            border-left: 4px solid var(--purple-600);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0.5rem;
        }
        .api-endpoint .method {
            display: inline-block;
            background: var(--purple-700);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 0.25rem;
            font-weight: 600;
            font-size: 0.875rem;
            margin-right: 0.5rem;
        }
        .back-home {
            margin-bottom: 2rem;
        }

        /* ---- Responsive ---- */
        @media (max-width: 1024px) {
            .guide-container {
                padding: 2rem 1.5rem;
            }
        }

        @media (max-width: 768px) {
            .guide-container {
                padding: 1.5rem 1.25rem;
            }

            .guide-container h1 {
                font-size: 2.25rem !important;
            }

            .guide-container > p {
                font-size: 1.0625rem !important;
                margin-bottom: 2rem !important;
            }

            .guide-section {
                padding: 1.5rem;
                border-radius: 0.75rem;
            }

            .guide-section h2 {
                font-size: 1.375rem;
            }

            .guide-section h3 {
                font-size: 1.125rem;
            }

            .guide-section pre {
                padding: 0.875rem;
                font-size: 0.8125rem;
                border-radius: 0.375rem;
            }

            .api-endpoint {
                padding: 0.875rem;
            }

            .api-endpoint .method {
                font-size: 0.8125rem;
                padding: 0.2rem 0.5rem;
            }
        }

        @media (max-width: 480px) {
            .guide-container {
                padding: 1rem;
            }

            .guide-container h1 {
                font-size: 1.75rem !important;
            }

            .guide-section {
                padding: 1.125rem;
            }

            .guide-section pre code {
                font-size: 0.75rem;
            }

            .guide-section ul {
                margin-left: 1.25rem;
            }
        }

        /* ---- Dark Mode ---- */
        [data-theme="dark"] .guide-section {
            background: #111120;
            border-color: var(--border-light);
        }

        [data-theme="dark"] .guide-section pre {
            background: #0C0C14;
            border-color: var(--border-light);
            color: #CBD5E1;
        }

        [data-theme="dark"] .guide-section pre code {
            color: #A78BFA;
        }

        [data-theme="dark"] .guide-section code {
            color: #A78BFA;
        }

        [data-theme="dark"] .api-endpoint {
            background: linear-gradient(135deg, var(--purple-50), var(--purple-100));
        }

        [data-theme="dark"] .guide-container > h1 {
            color: var(--text-primary);
        }

        [data-theme="dark"] .breadcrumb {
            color: var(--text-secondary);
        }
    </style>
    <!-- Theme: load before body paint to prevent flash -->
    <script src="./static/theme.js"></script>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-content">
                <div class="logo">
                    <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                        <rect width="32" height="32" rx="8" fill="url(#gradient)"/>
                        <path d="M16 8L8 16L16 24L24 16L16 8Z" fill="white" opacity="0.9"/>
                        <defs>
                            <linearGradient id="gradient" x1="0" y1="0" x2="32" y2="32">
                                <stop offset="0%" stop-color="#7C3AED"/>
                                <stop offset="100%" stop-color="#A855F7"/>
                            </linearGradient>
                        </defs>
                    </svg>
                    <span>NeighbourHood</span>
                </div>
                <!-- Theme toggle: always visible outside the hamburger menu -->
                <button id="theme-toggle" class="theme-toggle theme-toggle-pill" aria-label="Switch to dark mode" title="Switch to dark mode">
                    <span class="icon-sun">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
                    </span>
                    <span class="icon-moon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
                    </span>
                    <span class="toggle-label-dark">Dark</span>
                    <span class="toggle-label-light">Light</span>
                </button>
                <button class="nav-hamburger" id="nav-hamburger" aria-label="Toggle navigation" aria-expanded="false" aria-controls="nav-links">
                    <span></span><span></span><span></span>
                </button>
                <div class="nav-links" id="nav-links" role="navigation">
                    <a href="./index.html">Home</a>
                    <a href="./index.html#features">Features</a>
                    <a href="./index.html#integrations">Integrations</a>
                    <a href="https://github.com/SiddhantSShende/NeighbourHood" target="_blank" rel="noopener noreferrer">GitHub</a>
                    <a href="./dashboard.html" class="btn-primary">Get Started</a>
                </div>
            </div>
        </div>
    </nav>

    <main>
    <div class="guide-container">
        <div class="breadcrumb">
            <a href="./index.html">Home</a> / Developer Guide
        </div>

        <h1 style="font-size: 3rem; margin-bottom: 1rem; color: var(--text-primary);">
            Developer <span class="gradient-text">Guide</span>
        </h1>
        <p style="font-size: 1.25rem; color: var(--text-secondary); margin-bottom: 3rem;">
            Everything you need to integrate NeighbourHood into your application
        </p>

        <div class="guide-section">
            <h2>Quick Start</h2>
            <p>Get started with NeighbourHood in minutes. Data is stored locally on your machine for privacy and security.</p>
            
            <h3>Step 1: Installation</h3>
            <pre><code>npm install @neighbourhood/sdk
# or
yarn add @neighbourhood/sdk</code></pre>

            <h3>Step 2: Initialize the SDK</h3>
            <pre><code>import { NeighbourHood } from '@neighbourhood/sdk';

const nh = new NeighbourHood({
  apiKey: process.env.NH_API_KEY,
  storage: 'local' // Data stored in browser localStorage
});</code></pre>
        </div>

        <div class="guide-section">
            <h2>System Architecture & Design Principles</h2>
            <p>NeighbourHood implements a microservices-based distributed architecture following the principles of service-oriented architecture (SOA) and event-driven design patterns. The system is built on three fundamental architectural pillars:</p>
            
            <h3>1. Architectural Layers</h3>
            <p>The platform follows a clean architecture pattern with clear separation of concerns:</p>
            <ul>
                <li><strong>Presentation Layer</strong>: RESTful API Gateway serving as the unified entry point for all client interactions</li>
                <li><strong>Business Logic Layer</strong>: Microservices implementing domain-specific logic (Authentication, Integration, Workflow)</li>
                <li><strong>Data Access Layer</strong>: Repository pattern with PostgreSQL for persistent storage and Redis for caching</li>
                <li><strong>Integration Layer</strong>: Provider adapters implementing the Strategy pattern for third-party service communication</li>
            </ul>

            <h3>2. Design Patterns Applied</h3>
            <ul>
                <li><strong>Facade Pattern</strong>: API Gateway abstracts complexity of underlying microservices</li>
                <li><strong>Strategy Pattern</strong>: Pluggable integration providers with common interface</li>
                <li><strong>Observer Pattern</strong>: Event-driven workflow orchestration</li>
                <li><strong>Repository Pattern</strong>: Data access abstraction for database operations</li>
                <li><strong>Factory Pattern</strong>: Dynamic provider instantiation based on configuration</li>
            </ul>

            <h3>3. Scalability Considerations</h3>
            <p>The architecture supports horizontal scaling through:</p>
            <ul>
                <li>Stateless service design enabling load balancing across multiple instances</li>
                <li>Database connection pooling with configurable pool sizes</li>
                <li>Redis-based distributed caching for reduced database load</li>
                <li>Circuit breaker pattern for fault isolation</li>
            </ul>
        </div>

        <div class="guide-section">
            <h2>Integration Protocol Theory</h2>
            <p>The platform implements a standardized integration protocol that abstracts the complexity of disparate third-party APIs into a unified interface. This section describes the theoretical foundations of the integration layer.</p>

            <h3>Provider Abstraction Model</h3>
            <p>Each integration provider implements a common interface defined by the Provider Protocol:</p>
            <pre><code>type Provider interface {
    Authenticate(credentials AuthConfig) (Token, error)
    Execute(action string, params map[string]interface{}) (Response, error)
    ValidateToken(token Token) (bool, error)
    RefreshToken(token Token) (Token, error)
}</code></pre>

            <h3>Action Normalization</h3>
            <p>Provider-specific actions are normalized into a common taxonomy:</p>
            <ul>
                <li><strong>Communication Actions</strong>: send_message, create_channel, invite_user</li>
                <li><strong>Data Actions</strong>: create, read, update, delete (CRUD)</li>
                <li><strong>File Actions</strong>: upload, download, share, delete</li>
                <li><strong>User Actions</strong>: authenticate, authorize, get_profile</li>
            </ul>

            <h3>Protocol Buffers for Service Communication</h3>
            <p>Microservices communicate via gRPC using Protocol Buffers for:</p>
            <ul>
                <li>Type-safe inter-service communication</li>
                <li>Efficient binary serialization (smaller payloads than JSON)</li>
                <li>Automatic code generation for multiple languages</li>
                <li>Built-in support for streaming and bidirectional communication</li>
            </ul>
        </div>

        <div class="guide-section">
            <h2>Security Model & Cryptographic Foundations</h2>
            <p>Security is implemented through multiple layers of defense following the principle of defense in depth.</p>

            <h3>OAuth 2.0 Implementation</h3>
            <p>The authentication flow implements the Authorization Code Grant with PKCE (Proof Key for Code Exchange) to prevent authorization code interception attacks:</p>
            <pre><code>// Authorization Request with PKCE
code_verifier = random(128)
code_challenge = base64url(sha256(code_verifier))

GET /oauth/authorize?
    response_type=code&
    client_id={client_id}&
    redirect_uri={redirect_uri}&
    code_challenge={code_challenge}&
    code_challenge_method=S256</code></pre>

            <h3>Token Security</h3>
            <ul>
                <li><strong>JWT Tokens</strong>: Stateless authentication with HMAC-SHA256 signing</li>
                <li><strong>Token Rotation</strong>: Automatic refresh before expiration</li>
                <li><strong>Secure Storage</strong>: Tokens stored in browser localStorage with encryption</li>
                <li><strong>Token Revocation</strong>: Immediate invalidation on logout or security breach</li>
            </ul>

            <h3>Role-Based Access Control (RBAC)</h3>
            <p>Permissions are evaluated using the following algorithm:</p>
            <pre><code>function canAccess(user, resource, action):
    for role in user.roles:
        for permission in role.permissions:
            if permission.resource == resource AND
               permission.action == action:
                return true
    return false</code></pre>

            <h3>Data Protection</h3>
            <ul>
                <li><strong>At Rest</strong>: AES-256 encryption for sensitive data in database</li>
                <li><strong>In Transit</strong>: TLS 1.3 for all network communication</li>
                <li><strong>In Use</strong>: Memory encryption for sensitive operations</li>
            </ul>
        </div>

        <div class="guide-section">
            <h2>Performance Optimization Strategies</h2>
            <p>The platform implements multiple optimization techniques to achieve sub-100ms response times for 95th percentile requests.</p>

            <h3>Caching Strategy</h3>
            <p>Multi-level caching architecture:</p>
            <ul>
                <li><strong>L1 Cache</strong>: In-memory LRU cache within each service instance (up to 100MB)</li>
                <li><strong>L2 Cache</strong>: Redis distributed cache with 1-hour TTL</li>
                <li><strong>L3 Cache</strong>: CDN edge caching for static assets (24-hour TTL)</li>
            </ul>

            <h3>Database Optimization</h3>
            <pre><code>-- Optimized query with covering index
CREATE INDEX idx_integrations_user_provider 
ON integrations(user_id, provider, status)
INCLUDE (token, refresh_token, expires_at);</code></pre>

            <h3>Connection Pooling</h3>
            <p>Database connections are pooled with the following parameters:</p>
            <ul>
                <li><strong>Max Connections</strong>: 100 per service instance</li>
                <li><strong>Min Idle</strong>: 10 connections</li>
                <li><strong>Max Lifetime</strong>: 30 minutes (prevents stale connections)</li>
                <li><strong>Connection Timeout</strong>: 5 seconds</li>
            </ul>

            <h3>Computational Complexity</h3>
            <p>Key operations maintain optimal time complexity:</p>
            <ul>
                <li><strong>API Key Lookup</strong>: O(1) using hash maps</li>
                <li><strong>Permission Check</strong>: O(k) where k = average roles per user (typically k < 5)</li>
                <li><strong>Provider Discovery</strong>: O(1) using registry pattern</li>
                <li><strong>Workflow Execution</strong>: O(n) where n = number of steps</li>
            </ul>
        </div>

        <div class="guide-section">
            <h2>Workflow Engine Architecture</h2>
            <p>The workflow engine implements a directed acyclic graph (DAG) execution model with support for parallel and sequential execution.</p>

            <h3>Execution Model</h3>
            <p>Workflows are represented as state machines with the following states:</p>
            <ul>
                <li><strong>PENDING</strong>: Workflow queued for execution</li>
                <li><strong>RUNNING</strong>: Workflow currently executing</li>
                <li><strong>PAUSED</strong>: Workflow paused (manual intervention required)</li>
                <li><strong>COMPLETED</strong>: All steps executed successfully</li>
                <li><strong>FAILED</strong>: One or more steps failed</li>
                <li><strong>CANCELLED</strong>: Workflow manually cancelled</li>
            </ul>

            <h3>Error Handling & Retry Logic</h3>
            <p>Exponential backoff algorithm for transient failures:</p>
            <pre><code>function calculateBackoff(attempt):
    base_delay = 1000ms
    max_delay = 60000ms
    backoff = min(base_delay * (2 ^ attempt), max_delay)
    jitter = random(0, backoff * 0.1)
    return backoff + jitter</code></pre>

            <h3>Compensation Transactions</h3>
            <p>For failed workflows, compensation actions are executed in reverse order to maintain data consistency.</p>
        </div>

        <div class="guide-section">
            <h2>Distributed Systems Theory</h2>
            <p>The platform addresses the challenges of distributed systems through careful consideration of the CAP theorem and eventual consistency models.</p>

            <h3>CAP Theorem Trade-offs</h3>
            <p>NeighbourHood prioritizes <strong>Availability</strong> and <strong>Partition Tolerance</strong> (AP system) with eventual consistency:</p>
            <ul>
                <li>Service instances can operate independently during network partitions</li>
                <li>Data inconsistencies are resolved through conflict-free replicated data types (CRDTs)</li>
                <li>Strong consistency is enforced only for critical operations (authentication, authorization)</li>
            </ul>

            <h3>Service Discovery</h3>
            <p>Microservices register with a service registry enabling dynamic service discovery:</p>
            <pre><code>// Service registration
serviceRegistry.register({
    name: "integration-service",
    version: "1.0.0",
    host: "10.0.1.5",
    port: 8081,
    health_check: "/health"
})</code></pre>

            <h3>Circuit Breaker Pattern</h3>
            <p>Prevents cascading failures through automatic circuit breaking:</p>
            <ul>
                <li><strong>Closed State</strong>: Normal operation, requests flow through</li>
                <li><strong>Open State</strong>: Too many failures detected (>50% error rate), requests fail fast</li>
                <li><strong>Half-Open State</strong>: Testing recovery, limited requests allowed</li>
            </ul>
        </div>

        <div class="guide-section">
            <h2>Authentication</h2>
            <p>NeighbourHood uses OAuth 2.0 for secure authentication. All tokens are stored locally on your machine.</p>
            
            <div class="api-endpoint">
                <span class="method">POST</span>
                <code>/api/integration/authurl</code>
            </div>
            
            <pre><code>{
  "provider": "slack",
  "state": "random-state-string"
}</code></pre>

            <p><strong>Response:</strong></p>
            <pre><code>{
  "auth_url": "https://slack.com/oauth/v2/authorize?...",
  "state": "random-state-string"
}</code></pre>
        </div>

        <div class="guide-section">
            <h2>Making API Calls</h2>
            
            <h3>Connect to a Provider</h3>
            <pre><code>// Connect to Slack
const slack = await nh.connect('slack');

// Send a message
await slack.sendMessage({
  channel: '#general',
  text: 'Hello from NeighbourHood!'
});</code></pre>

            <h3>Execute Custom Actions</h3>
            <div class="api-endpoint">
                <span class="method">POST</span>
                <code>/api/integration/execute</code>
            </div>
            
            <pre><code>{
  "provider": "gmail",
  "token": {
    "access_token": "ya29.xxxx",
    "token_type": "Bearer"
  },
  "action": "send_email",
  "payload": {
    "to": "user@example.com",
    "subject": "Hello",
    "body": "This is a test email"
  }
}</code></pre>
        </div>

        <div class="guide-section">
            <h2>Workflows</h2>
            <p>Orchestrate multi-step workflows across different providers.</p>
            
            <div class="api-endpoint">
                <span class="method">POST</span>
                <code>/api/workflow/execute</code>
            </div>
            
            <pre><code>{
  "workflow": {
    "name": "Email to Slack Notification",
    "steps": [
      {
        "provider": "gmail",
        "action": "send_email",
        "payload": {
          "to": "user@example.com",
          "subject": "Task Complete",
          "body": "Your task has been completed"
        }
      },
      {
        "provider": "slack",
        "action": "send_message",
        "payload": {
          "channel": "#notifications",
          "text": "Email sent successfully"
        }
      }
    ]
  },
  "tokens": {
    "gmail": { "access_token": "..." },
    "slack": { "access_token": "..." }
  }
}</code></pre>
        </div>

        <div class="guide-section">
            <h2>Local Data Storage</h2>
            <p>NeighbourHood stores all your integration data locally on your machine using browser localStorage. This ensures:</p>
            <ul>
                <li><strong>Privacy</strong>: Your tokens and data never leave your device</li>
                <li><strong>Security</strong>: No server-side storage of sensitive credentials</li>
                <li><strong>Performance</strong>: Instant access to cached data</li>
                <li><strong>Offline Support</strong>: Work even without internet connection</li>
            </ul>

            <h3>Managing Stored Data</h3>
            <pre><code>// Get all stored integrations
const integrations = nh.getIntegrations();

// Clear specific integration data
nh.clearIntegration('slack');

// Clear all data
nh.clearAll();</code></pre>
        </div>

        <div class="guide-section">
            <h2>Available Integrations</h2>
            <p>Currently supported integrations:</p>
            <ul>
                <li><strong>Communication:</strong> Slack, Discord, Microsoft Teams</li>
                <li><strong>Email:</strong> Gmail, Outlook, SendGrid, Mailchimp</li>
                <li><strong>Project Management:</strong> Jira, Asana, Trello, Monday.com</li>
                <li><strong>Developer Tools:</strong> GitHub, GitLab, Bitbucket</li>
                <li><strong>Productivity:</strong> Notion, Google Calendar, Zoom</li>
                <li><strong>CRM:</strong> Salesforce, HubSpot, Pipedrive</li>
                <li><strong>Payments:</strong> Stripe, PayPal, Square</li>
                <li><strong>Storage:</strong> Dropbox, Google Drive, Box</li>
            </ul>
        </div>

        <div class="guide-section">
            <h2>Additional Resources</h2>
            <ul>
                <li><a href="https://github.com/SiddhantSShende/NeighbourHood">GitHub Repository</a> - View source code and contribute</li>
                <li><a href="./dashboard.html">Dashboard</a> - Manage your integrations</li>
                <li><a href="https://github.com/SiddhantSShende/NeighbourHood/blob/main/API_DOCUMENTATION.md">API Reference</a> - Complete API documentation</li>
                <li><a href="https://github.com/SiddhantSShende/NeighbourHood/blob/main/CONTRIBUTING.md">Contributing Guide</a> - Help improve NeighbourHood</li>
            </ul>
        </div>

        <div style="text-align: center; padding: 3rem 0;">
            <h2 style="margin-bottom: 1rem;">Ready to get started?</h2>
            <a href="./dashboard.html" class="btn-primary btn-large">Launch Dashboard</a>
        </div>
    </div><!-- /.guide-container -->
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>Product</h4>
                    <a href="./index.html#features">Features</a>
                    <a href="./index.html#integrations">Integrations</a>
                    <a href="./developer-guide.html">Developer Guide</a>
                    <a href="./dashboard.html">Dashboard</a>
                </div>
                <div class="footer-section">
                    <h4>Resources</h4>
                    <a href="https://github.com/SiddhantSShende/NeighbourHood">GitHub</a>
                    <a href="https://github.com/SiddhantSShende/NeighbourHood/blob/main/API_DOCUMENTATION.md">API Reference</a>
                    <a href="https://github.com/SiddhantSShende/NeighbourHood/blob/main/CONTRIBUTING.md">Contributing</a>
                </div>
                <div class="footer-section">
                    <h4>Company</h4>
                    <a href="https://github.com/SiddhantSShende">About</a>
                    <a href="https://github.com/SiddhantSShende/NeighbourHood">Contact</a>
                </div>
                <div class="footer-section">
                    <h4>Legal</h4>
                    <a href="https://github.com/SiddhantSShende/NeighbourHood">Privacy Policy</a>
                    <a href="https://github.com/SiddhantSShende/NeighbourHood">Terms of Service</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2026 NeighbourHood. Open source and built by developers, for developers.</p>
            </div>
        </div>
    </footer>
    <script>
        (function () {
            var btn = document.getElementById('nav-hamburger');
            var links = document.getElementById('nav-links');

            function openMenu() {
                btn.classList.add('open');
                links.classList.add('mobile-open');
                btn.setAttribute('aria-expanded', 'true');
                document.body.style.overflow = 'hidden';
            }

            function closeMenu() {
                btn.classList.remove('open');
                links.classList.remove('mobile-open');
                btn.setAttribute('aria-expanded', 'false');
                document.body.style.overflow = '';
            }

            btn.addEventListener('click', function () {
                if (links.classList.contains('mobile-open')) {
                    closeMenu();
                } else {
                    openMenu();
                }
            });

            links.querySelectorAll('a').forEach(function (a) {
                a.addEventListener('click', closeMenu);
            });

            window.addEventListener('resize', function () {
                if (window.innerWidth > 768) closeMenu();
            });
        }());
    </script>
</body>
</html>
